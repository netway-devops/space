/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
// From: http://hg.mozilla.org/mozilla-central/raw-file/ec10630b1a54/js/src/devtools/jint/sunspider/string-base64.js
/*jslint white: false, bitwise: false, plusplus: false */
/*global console */
var Base64={toBase64Table:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".split(""),base64Pad:"=",encode:function(f){var b="",h=Base64.toBase64Table,d=f.length,a=d%3,c=0,g=0;for(c=0;c<d-2;c+=3){b+=h[f[c]>>2],b+=h[((f[c]&3)<<4)+(f[c+1]>>4)],b+=h[((f[c+1]&15)<<2)+(f[c+2]>>6)],b+=h[f[c+2]&63]}return a===2?(g=d-a,b+=h[f[g]>>2],b+=h[((f[g]&3)<<4)+(f[g+1]>>4)],b+=h[(f[g+1]&15)<<2],b+=h[64]):a===1&&(g=d-a,b+=h[f[g]>>2],b+=h[(f[g]&3)<<4],b+=h[64],b+=h[64]),b},toBinaryTable:[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,0,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1],decode:function(q,y){y=typeof y!="undefined"?y:0;var g=Base64.toBinaryTable,b=Base64.base64Pad,k,z,d,x,w,p,j=0,v=0,m=q.indexOf("=")-y;m<0&&(m=q.length-y),z=(m>>2)*3+Math.floor(m%4/1.5),k=new Array(z);for(d=0,x=y;x<q.length;x++){w=g[q.charCodeAt(x)&127],p=q.charAt(x)===b;if(w===-1){if(q.charCodeAt(x)){console.error("Illegal character code "+q.charCodeAt(x)+" at position "+x)}continue}v=v<<6|w,j+=6,j>=8&&(j-=8,p||(k[d++]=v>>j&255),v&=(1<<j)-1)}if(j){throw {name:"Base64-Error",message:"Corrupted base64 string"}}return k}};