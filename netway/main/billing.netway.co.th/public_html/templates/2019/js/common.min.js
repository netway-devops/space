function appendLoader(e){loaders[loaders.length]=e}function isEmpty(e){if(typeof e=="string"&&e.length>0)return!1;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function ajax_update(e,t,n,r){r&&$(n).html('<center><img src="ajax-loading.gif" /></center>'),t!=undefined&&isEmpty(t)&&(t={empty1m:"param"}),$.post(e,t,function(e){var t=parse_response(e);if(!t)return $(n).html(""),!1;$(n).html(t)})}function parse_response(data){if(data.indexOf("<!-- {")!=0)return!1;var codes=eval("("+data.substr(data.indexOf("<!-- ")+4,data.indexOf("-->")-4)+")"),i=0;for(i=0;i<codes.ERROR.length;i++)$("#errors .alert").append("<span >"+codes.ERROR[i]+"</span>");for(i=0;i<codes.INFO.length;i++)$("#infos .alert").append("<span >"+codes.INFO[i]+"</span>");return $("#errors").find("span").length>0&&($("#errors .alert").show(),$("#errors").slideDown(),reBind()),$("#infos").find("span").length>0&&($("#infos .alert").show(),$("#infos").slideDown(),reBind()),data.substr(data.indexOf("-->")+3,data.length)}function reBind(){$(".close").unbind("click"),$(".close").click(function(){return $(this).parent().fadeOut("fast",function(){$(this).find("span").remove()}),!1})}function wrapIcons(){var e=$.browser.version.substring(0,$.browser.version.indexOf("."));if($.browser.msie&&e=="7"){var t={phone:"!",mobile:'"',tag:"#",directions:"$",mail:"%",pencil:"&",paperclip:"'",reply:"(","replay-all":")",forward:"*",user:"+",users:",","add-user":"-",card:".",extract:"/",marker:"0",map:"1",compass:"2",arrow:"3",target:"4",path:"5",heart:"6",star:"7",like:"8",chat:"9",speech:":",quote:";",printer:"<",bell:"=",link:">",flag:"?",gear:"@",flashlight:"A",cup:"B","price-tag":"C",camera:"D",moon:"E",palette:"F",leaf:"G","music-note":"H",bag:"I",plane:"J",buoy:"K",rain:"L",eye:"M",clock:"N",mic:"O",calendar:"P",lightning:"Q",hourglass:"R",rss:"S",wifi:"T",lock:"U",unlock:"V",tick:"W",cross:"X","minus-round":"Y","plus-round":"Z","cross-round":"[",minus:"\\",plus:"]",forbidden:"^",info:"_","info-round":"`",question:"a","question-round":"b",warning:"c",redo:"d",undo:"e",swap:"f",revert:"g",refresh:"h",list:"i","list-add":"j",thumbs:"k","page-list":"l",page:"m",pages:"n",marker:"0",pictures:"p",movie:"q",music:"r",folder:"s",drawer:"t",trash:"u",outbox:"v",inbox:"w",download:"x",cloud:"y","cloud-upload":"z",play:"{",pause:"|",record:"~",forward:"\u00c4",backward:"\u00c5",previous:"\u00c7",next:"\u00c9",expand:"\u00d1",reduce:"\u00d6",volume:"\u00dc",loud:"\u00e1",mute:"\u00e0","left-fat":"\u00e2","down-fat":"\u00e4","up-fat":"\u00e3","right-fat":"\u00e5",left:"\u00e7",down:"\u00e9",up:"\u00e8",right:"\u00ea","left-round":"\u00eb","down-round":"\u00ed","up-round":"\u00ec","right-round":"\u00ee",home:"\u00ef",ribbon:"\u00f1",read:"\u00f3","new-tab":"\u00f2",search:"\u00f4",ellipsis:"\u00f6","bullet-list":"\u00ae","creative-commons":"\u00a9"};$('[class^="iconfont-"],[class*=" iconfont-"]').each(function(e){var n=/iconfont-([^ ]+)/.exec(this.className)[1],r=$(this);t[n]&&r.prepend('<span class="font-icon'+(r.is(":empty")?" empty":"")+'">'+t[n]+"</span>")})}$.browser.msie&&parseInt(e)==8&&$('[class^="iconfont-"],[class*=" iconfont-"]').each(function(e){var t=$(this);t.is(":empty")&&t.addClass("font-icon-empty")})}var cansearch=!0,loaders=new Array;$.extend($.fn,{slideToElement:function(e){var t=$("a[name="+e+"]");if(t.length){var n=t.offset().top;return $("html,body").animate({scrollTop:n-100},500,"linear",function(){}),!1}},addLoader:function(){var e=$(this).width(),t=$(this).height();e+=parseInt($(this).css("padding-left"),10)+parseInt($(this).css("padding-right"),10),t+=parseInt($(this).css("padding-top"),10)+parseInt($(this).css("padding-bottom"),10);if($("#preloader").length>0)$("#preloader").css({width:e+"px",height:t+"px"}),$("#preloader").show();else{var n='<div id="preloader" style="position:absolute;top:'+$(this).position().top+"px;left:"+$(this).position().left+"px;width:"+e+"px;height:"+t+'px;"></div> ';$(this).append(n)}},TabbedMenu:function(e){var t=e!=undefined&&e.elem!=undefined?e.elem:".tabb",n=e!=undefined&&e.num!=undefined?e.num:0;return $(t).hide(),$(t).eq(n).show(),$("a.tchoice").eq(n).addClass("picked"),$(this).find("a.tchoice").each(function(e){$(this).click(function(){return $(t).hide(),$(t).eq(e).show(),$("a.tchoice").removeClass("picked"),$(this).addClass("picked"),!1})}),$(this)},ajaxHint:function(){$(this).each(function(){$(this).keyup(function(){cansearch&&($(this).val()!=""&&$(this).val()!=" "?(cansearch=!1,$.post("?cmd=tickets&action=kbhint",{query:$(this).val()},function(e){cansearch=!0;var t=parse_response(e);t!==!1&&typeof t=="string"&&t!=""&&($("#hintarea").html(t),$("#hintarea").is(":visible")||$("#hintarea").slideDown())})):$("#hintarea").slideUp("fast",function(){$(this).html("")}))})})}}),$(document).ready(function(){function CSRFProtection(e){var t=$('meta[name="csrf-token"]').attr("content");t&&e.setRequestHeader("X-CSRF-Token",t)}function processScroll(){var e,t=$win.scrollTop();t>=navTop&&!isFixed?(isFixed=1,$nav.addClass("nav-fixed")):t<=navTop&&isFixed&&(isFixed=0,$nav.removeClass("nav-fixed"))}function processScroll2(){var e=$(window).scrollTop()-$("#sidemenu").offset().top,t=$("#cart").height()-$("#floater").height()-15;e>t&&(e=t),e<0&&(e=0),$("#mainmenu").hasClass("nav-fixed")&&(e+=60),$("#floater").animate({top:e+"px"},{queue:!1,duration:300})}function clearMenus(e){$(e).parent().children(".dropdown-menu").stop(!1,!0).slideUp("fast").parent().removeClass("open")}"ajaxPrefilter"in $?$.ajaxPrefilter(function(e,t,n){CSRFProtection(n)}):$(document).ajaxSend(function(e,t){CSRFProtection(t)}),$(".vtip_description").tooltip(),$(".sh1a .orderboxpadding").click(function(){var e=$(this).parent().find(".subdesc_").eq(0);$(e).is(":visible")?$(e).hide():$(e).show()}),$("a.sortorder").click(function(){return $("#updater").addLoader(),$("#checkall").attr("checked",!1),$("#currentlist").attr("href",$(this).attr("href")),$("a.sortorder").removeClass("asc"),$("a.sortorder").removeClass("desc"),$(this).attr("href").substring($(this).attr("href").lastIndexOf("|"))=="|ASC"?($(this).addClass("asc"),$(this).attr("href",$(this).attr("href").substring(0,$(this).attr("href").lastIndexOf("|"))+"|DESC")):($(this).addClass("desc"),$(this).attr("href",$(this).attr("href").substring(0,$(this).attr("href").lastIndexOf("|"))+"|ASC")),ajax_update($("#currentlist").attr("href"),{page:$("#currentpage").val(),layer:"ajax"},"#updater"),!1}),$("#pageswitch button").click(function(){var e=parseInt($(this).text())-1;return $("#currentpage").val(e).change(),!1}),$("#currentpage").change(function(){$("#updater").addLoader(),$("#checkall").attr("checked",!1),ajax_update($("#currentlist").attr("href"),{page:$("#currentpage").val(),layer:"ajax"},"#updater")}),$(".submiter").click(function(){$("#updater").addLoader(),$("#checkall").attr("checked",!1);var e="";return $(this).attr("queue")&&(e="push"),ajax_update($("#currentlist").attr("href")+"&"+$("#testform").serialize()+"&"+$(this).attr("name"),{layer:"ajax",stack:e},"#updater"),!1}),reBind(),$("#ticketmessage").ajaxHint(),setTimeout(function(){$("#errors").find("span").length>0&&$("#errors").slideDown(),$("#infos").find("span").length>0&&$("#infos").slideDown()},30);if(loaders.length>0){var i=0;for(i=0;i<loaders.length;i++){if(loaders[i]=="flyingSidemenu")continue;eval(loaders[i]+"()")}}(function(e){var t=0,n=100,r=e(".pa1 a","#submenu"),s=r.length;r.each(function(r){t==0&&e(this).width()+e(this).position().left>960&&(t=r),e(this).width()>n&&(n=e(this).width())});if(t>0){var o=e('<ul class="dropdown-menu"></ul>'),u=e('<a class="dropdown-toggle" data-toggle="dropdown" href="#"></a>').text("More").append(e('<b class="caret"></b>')),a=e('<li class="dropdown"></li>').append(u);for(i=s;i>=t;i--)o.prepend(r.eq(i));a.append(o),e(".pa1","#submenu").append(a)}})(jQuery);var $win=$(window),$nav=$("#mainmenu"),navTop=$("#mainmenu").length&&$("#mainmenu").offset().top,isFixed=0;processScroll(),wrapIcons(),$win.on("scroll",processScroll),$("#cart").length&&$("#sidemenu").length&&$("#floater").length&&$win.on("scroll",processScroll2),$("#mainmenu .dropdown-menu button.btn").click(function(){$(this).attr("href")&&(window.location=$(this).attr("href"))}),$("#mainmenu .dropdown-toggle").live({mouseenter:function(){$(this).parent().addClass("open").children(".dropdown-menu").slideDown("fast")},mouseleave:function(){var e=this,t=setTimeout(function(){clearMenus(e)},50);$(".dropdown-menu",this.parent).data("timeoutId",t)}}).unbind("click").click(function(e){return e.stopPropagation(),!0}),$(".dropdown-menu","#mainmenu li.dropdown").live({mouseenter:function(){clearTimeout($(this).data("timeoutId"))},mouseleave:function(){clearMenus(this)}})})